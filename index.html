<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>EvoPlan</title>

	<!-- Bootstrapping UI5 -->
	<!-- https://sapui5.hana.ondemand.com/resources/sap-ui-core.js -->
	<script id="sap-ui-bootstrap"
			src="resources/sap-ui-core.js"
			data-sap-ui-libs="sap.m, sap.ui.layout"
			data-sap-ui-theme="sap_belize"
			data-sap-ui-compatVersion="edge"
			data-sap-ui-resourceroots='{"com.evorait.evoplan": "."}'
			data-sap-ui-frameOptions="trusted">
	</script>
	<script type="text/javascript" src="cordova.js"></script>

	<script type="text/javascript">
        jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-core');
        jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-widget');
        jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-mouse');
        jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-sortable');
        jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-droppable');
        jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-draggable');

        sap.ui.localResources("sapui5draganddrop");
	</script>

	<script type="text/javascript">
	  /*=====================================================================
	   The following onError function is used to trap any errors that occur
	   while the application is running. Cordova fails silently whenever it
	   encounters an error in HTML or JavaScript code. So, with that being
	   the case, developers cannot tell when/why their applications are
	   failing. Any code error will cause the function to fire and display
	   the error in an alert dialog.
	   ======================================================================*/
	  window.onerror = function(msg, url, line) {
		var idx = url.lastIndexOf("/");
		if (idx > -1) {
		  url = url.substring(idx + 1);
		}
		alert("ERROR in " + url + " (line #" + line + ")\n" + msg);
		console.error(msg);
		return false;
	  };
	</script>

	<script>
		function getUrlParameterName(sParam){
			var sPageURL = window.location.search.substring(1);
			var sURLVariables = sPageURL.split('&');
			for (var i = 0; i < sURLVariables.length; i++) 
			{
				var sParameterName = sURLVariables[i].split('=');
				if (sParameterName[0] == sParam) 
				{
					return true;
				}
			}
			return false;
		} 
		
		function startApp() {
			sap.ui.getCore().attachInit(function () {
				sap.ui.require([
					"sap/m/Shell",
					"sap/ui/core/ComponentContainer"
				], function (Shell, ComponentContainer) {
                    // initialize the UI component
                    // create a new Shell that contains the rootview
                    var oShell = new sap.m.Shell({
                        app: new ComponentContainer({
                            name: "com.evorait.evoplan",
                            height: "100%",
                            width: "100%"
                        }),
                        id: "appShell",
                        appWidthLimited: false
                    });
                    // load the view that contains the unified shell
                    oShell.placeAt("content");
				});
			});
		}
			
		window.onload = function() {
			jQuery.sap.require("com.evorait.evoplan.dev.devapp");
			if (window.cordova || getUrlParameterName("companionbuster")) {
				var page = window.location.pathname.split("/").pop();
                if(page === "preview_hidden.html") {
                    window.sap_webide_FacadePreview = true;
                }
				com.evorait.evoplan.dev.devapp.initialize();
			}
			else {
				startApp();
			}
		}
	</script>

</head>

<!-- UI Content -->
<body class="sapUiBody" id="content">
</body>
</html>