<core:FragmentDefinition xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core" xmlns:uxap="sap.uxap"
	xmlns:layout="sap.ui.layout" xmlns:date="com.evorait.evotime.block.date" xmlns:log="com.evorait.evotime.block.log"
	xmlns:smartForm="sap.ui.comp.smartform" xmlns:smartField="sap.ui.comp.smartfield" xmlns:sections="com.evorait.evoplan.block.sections"
	xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1">
	<!--<Text text="Hello XML Template" />-->
	<template:alias name=".AH" value="sap.ui.model.odata.AnnotationHelper">
		<template:if test="{meta>com.sap.vocabularies.UI.v1.HeaderInfo}">
			<template:with path="meta>com.sap.vocabularies.UI.v1.HeaderInfo" var="header">
				<uxap:ObjectPageLayout id="ObjectPageLayout" enableLazyLoading="false">
					<uxap:headerTitle>
						<uxap:ObjectPageHeader class="sapUiNoContentPadding" objectImageURI="{STATUS_ICON}" objectImageShape="Circle" objectTitle="{DemandDesc}"
							objectSubtitle="{ExtKey}" objectImageAlt="{i18n>xfld.demandName}" id="ObjectPageLayoutHeaderTitle">
							<uxap:actions>
								<uxap:ObjectPageHeaderActionButton id="idAssignHeaderAction" text="{i18n>xbut.assign}" tooltip="{i18n>xbut.assign}" type="Emphasized"
									hideIcon="false" hideText="false" press="onClickAssign" visible="{ALLOW_ASSIGN}">
									<uxap:dependents>
										<core:Fragment fragmentName="com.evorait.evoplan.ui.templates.ActionSheetTemplate" type="XML"/>
									</uxap:dependents>
								</uxap:ObjectPageHeaderActionButton>
								<uxap:ObjectPageHeaderActionButton id="idSetFunctionHeaderAction" text="{i18n>xbut.buttonExecuteFunction}" tooltip="{i18n>xbut.buttonExecuteFunction}" type="Emphasized"
									hideIcon="false" hideText="false" press="onClickSetFunction" 	visible="{ parts:[{path:'viewModel>/showStatusChangeButton'},{path:'ALLOW_ASSIGN'},{path:'Status'},{path :'user>/ENABLE_SET_FUNCTION'}], formatter: '.getSetFunction' }">
									<!--<uxap:dependents>-->
									<!--	<core:Fragment fragmentName="com.evorait.evoplan.ui.templates.ActionSheetTemplate" type="XML"/>-->
									<!--</uxap:dependents>-->
								</uxap:ObjectPageHeaderActionButton>
								<uxap:ObjectPageHeaderActionButton id="idStatusHeaderAction" text="{i18n>xbut.changeStatus}" tooltip="{i18n>xbut.changeStatus}"
									visible="{ parts:[{path:'viewModel>/showStatusChangeButton'},{path:'ALLOW_ASSIGN'},{path:'Status'},{path :'user>/ENABLE_CHANGE_STATUS'}], formatter: '.getVisible' }"
									hideIcon="false" hideText="false" press="onClickAction"/>
								<Button text="{i18n>xbut.buttonBack}" tooltip="{i18n>xbut.buttonBack}" type="Default" press="navBack"/>
							</uxap:actions>
							<uxap:breadcrumbs>
								<Breadcrumbs currentLocationText="{i18n>xtit.demandDetail}">
									<Link text="{viewModel>/detailPageBreadCrum}" press="navBack"/>
								</Breadcrumbs>
							</uxap:breadcrumbs>
						</uxap:ObjectPageHeader>
					</uxap:headerTitle>
					<uxap:headerContent>
						<template:with path="meta>com.sap.vocabularies.UI.v1.HeaderFacets" var="headerInfo">
							<layout:VerticalLayout>
								<layout:content>
									<template:repeat list="{headerInfo>}">
										<template:with path="headerInfo>Target" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="target">
											<template:if test="{target>LongDescription}">
												<template:then>
													<ObjectStatus title="{path:'target>Title',formatter:'.AH.format'}"
														text="{path:'target>Value',formatter:'.AH.format'} ({path:'target>LongDescription',formatter:'.AH.format'})"/>
												</template:then>
												<template:else>
													<ObjectStatus title="{path:'target>Title',formatter:'.AH.format'}" text="{path:'target>Value',formatter:'.AH.format'}"/>
												</template:else>
											</template:if>
										</template:with>
									</template:repeat>
								</layout:content>
							</layout:VerticalLayout>
						</template:with>
					</uxap:headerContent>
					<uxap:sections>
						<template:with path="meta>com.sap.vocabularies.UI.v1.Facets" var="sections">
							<template:repeat list="{sections>}">
								<uxap:ObjectPageSection title="{path:'sections>Label',formatter:'.AH.format'}">
									<uxap:subSections>
										<uxap:ObjectPageSubSection>
											<uxap:blocks>
												<template:if test="{:= (${sections>Org.OData.Core.V1.Description/String} === 'Form')}">
													<template:then>
														<template:with path="sections>Facets" var="facets">
															<core:Fragment fragmentName="com.evorait.evoplan.ui.templates.FormTemplate" type="XML"/>
														</template:with>
													</template:then>
													<template:elseif test="{:= (${sections>Org.OData.Core.V1.Description/String} === 'AssignmentTable')}">
														<sections:AssignmentBlock id="assignMentsBlock" onRowClick="onRowClick"/>
													</template:elseif>
													<template:elseif test="{:= (${sections>Org.OData.Core.V1.Description/String} === 'QualificationTable')}">
														<sections:DemandQualificationBlock id="qualificationBlock" />
													</template:elseif>
													<template:elseif test="{:= (${sections>Org.OData.Core.V1.Description/String} === 'MaterialInfoTable')}">
														<sections:DemandComponentBlock id="materialInfoBlock" />
													</template:elseif>
													<template:else>
														
													</template:else>
												</template:if>
											</uxap:blocks>
										</uxap:ObjectPageSubSection>
									</uxap:subSections>
								</uxap:ObjectPageSection>
							</template:repeat>
						</template:with>
					</uxap:sections>
				</uxap:ObjectPageLayout>
			</template:with>
		</template:if>
	</template:alias>
</core:FragmentDefinition>