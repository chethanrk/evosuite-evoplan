<mvc:View xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core" xmlns:f="sap.f" xmlns:smartTable="sap.ui.comp.smarttable"
	xmlns:semantic="sap.m.semantic" xmlns:dnd="sap.ui.core.dnd" xmlns:table="sap.ui.table" xmlns:tnt="sap.tnt"
	xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" controllerName="com.evorait.evoplan.controller.demands.Demands"
	displayBlock="true" height="100%">
	<Page id="listPage" title="{i18n>xtit.itemListTitle}" showFooter="false" showHeader="false">
		<f:DynamicPage headerExpanded="true" fitContent="true" preserveHeaderStateOnScroll="true" showFooter="true" toggleHeaderOnTitleClick="false"
			class="sapUiNoContentPadding tableContentPage">
			<f:header>
				<f:DynamicPageHeader pinnable="true">
					<f:content>
						<core:Fragment fragmentName="com.evorait.evoplan.view.common.fragments.SmartFilter" type="XML"/>
					</f:content>
				</f:DynamicPageHeader>
			</f:header>
			<f:content>
				<!--<core:Fragment fragmentName="com.evorait.evoplan.view.fragments.DemandsTable" type="XML"></core:Fragment>-->
				<smartTable:SmartTable id="draggableList" height="100%" width="100%" direction="Column" fitContainer="true" enableAutoBinding="true"
					entitySet="{viewModel>/subTableSet}" smartFilterId="listReportFilter" showRowCount="true" header="{i18n>xtit.itemListTitle}"
					useExportToExcel="true" useVariantManagement="true" persistencyKey="{viewModel>/persistencyKeyDemandTable}" useTablePersonalisation="true"
					editTogglable="{user>/ENABLE_DEMAND_EDIT}" app:useSmartField="true" editToggled="onEditToggledDemandTable"
					requestAtLeastFields="Guid,NUMBER_OF_ASSIGNMENTS,ALLOW_ASSIGN,ALLOW_ONHOLD,ALLOW_UNASSIGN,ALLOW_STARTED,ALLOW_ENROUTE,ALLOW_DEM_MOBILE,ALLOW_COMPLETE,StatusDesc,CRITICALITY,REQUIREMENT_PROFILE_ID,ENABLE_ROUTE_EVOORDER,ENABLE_ROUTE_EVOEQUIP,ENABLE_ROUTE_EVONOTIFY,ENABLE_ROUTE_EVOTIME,EQUIPMENT,NOTIFICATION,DemandDesc,ALLOW_FINDRESOURCE,ORDER_TYPE,ENABLE_ROUTE_GUI1,ENABLE_ROUTE_GUI2,ENABLE_ROUTE_EVOFLOC,FUNCTIONAL_LOC,COMPONENT_EXISTS,FIXED_ASSGN_START_DATE,FIXED_ASSGN_START_TIME,FIXED_ASSGN_END_DATE,FIXED_ASSGN_END_TIME,ALLOW_ASSIGNMENT_DIALOG,LONG_TEXT_ICON,OBJECT_SOURCE_TYPE,FIXED_APPOINTMENT,FIXED_APPOINTMENT_START_DATE,FIXED_APPOINTMENT_START_TIME,FIXED_APPOINTMENT_END_DATE,FIXED_APPOINTMENT_END_TIME">
					<!-- layout data used to make the table growing but the filter bar fixed -->
					<smartTable:layoutData>
						<FlexItemData growFactor="1"/>
					</smartTable:layoutData>
					<smartTable:customToolbar>
					<OverflowToolbar>
						<core:ExtensionPoint name="TableExtP|Demands|DemandsSet|CustomToolbar|Left"/>
						<ToolbarSpacer/>
						<core:ExtensionPoint name="TableExtP|Demands|DemandsSet|CustomToolbar|Right"/>
					</OverflowToolbar>
				</smartTable:customToolbar>
					<table:Table columnResize="onColumnResize" minAutoRowCount="5" threshold="{user>/DEFAULT_DEMAND_THRESHOLD}" cellClick="onCopyDemandCellData">
						<table:rowSettingsTemplate>
							<table:RowSettings highlight="{ path:'CRITICALITY', formatter:'.formatter.formatCriticality' }"/>
						</table:rowSettingsTemplate>
						<table:columns>
							<core:ExtensionPoint name="TableExtP|Demands|DemandsSet|CustomColumn"/>
							<table:Column hAlign="Center" width="3rem" visible="{= ${/#Demand/STATUS_ICON/@sap:visible} === 'false' ? false : true}">
								<table:customData>
									<core:CustomData key="p13nData" value='\{"columnKey": "STATUS_ICON", "leadingProperty": "STATUS_ICON"}'/>
								</table:customData>
								<Label text="{/#Demand/STATUS_ICON/@sap:label}"/>
								<table:template>
									<core:Icon src="{STATUS_ICON}" color="{ path:'CRITICALITY', formatter:'.formatter.formatStatusIconColor' }" tooltip="{StatusDesc}"></core:Icon>
								</table:template>
							</table:Column>
							<table:Column hAlign="Center" width="3rem">
								<table:customData>
									<core:CustomData key="p13nData" value='\{"columnKey": "DEMAND_ICON", "leadingProperty": "DEMAND_ICON"}'/>
								</table:customData>
								<Label text="{/#Demand/DEMAND_ICON/@sap:label}"/>
								<table:template>
									<core:Icon src="{DEMAND_ICON}" tooltip="{DemandDesc}"></core:Icon>
								</table:template>
							</table:Column>
							<table:Column hAlign="Center" width="9rem" visible="{user>/ENABLE_MATERIAL_AVAILABILITY}">
								<table:customData>
									<core:CustomData key="p13nData" value='\{"columnKey": "MATERIAL_STATUS", "leadingProperty": "MATERIAL_STATUS"}'/>
								</table:customData>
								<Label text="{/#Demand/MATERIAL_STATUS/@sap:label}"/>
								<table:template>
									<HBox>
										<ObjectStatus class="sapUiTinyMargin" tooltip="{ path:'MATERIAL_STATUS', formatter:'.formatter.formatMatStatusTooltip' }"
											text="{ path:'MATERIAL_STATUS', formatter:'.formatter.formatMaterialStatus' }"
											visible="{ path:'COMPONENT_EXISTS', formatter:'.formatter.formatComponentExist' }"
											icon="{ path:'MATERIAL_STATUS', formatter:'.formatter.formatMaterialStatusIcon' }"
											state="{ path:'MATERIAL_STATUS', formatter:'.formatter.formatMaterialState' }"/>
									</HBox>
								</table:template>
							</table:Column>
							<core:Fragment fragmentName="com.evorait.evoplan.view.common.fragments.LongTextColumn" type="XML"/>
							<core:Fragment fragmentName="com.evorait.evoplan.view.common.fragments.DemandQualificationColumn" type="XML"/>
							<table:Column hAlign="Center" width="3rem" visible="{user>/ENABLE_EMP}">
								<table:customData>
									<core:CustomData key="p13nData" value='\{"columnKey": "SYNC_STATUS", "leadingProperty": "SYNC_STATUS"}'/>
								</table:customData>
								<Label text="{/#Demand/SYNC_STATUS/@sap:label}"/>
								<table:template>
									<core:Icon src="{ path:'SYNC_STATUS', formatter:'.formatter.formatSyncIcon' }"
										color="{ path:'SYNC_STATUS', formatter:'.formatter.formatSyncIconColor' }"
										tooltip="{ path:'SYNC_STATUS', formatter:'.formatter.formatSyncTooltip' }"></core:Icon>
								</table:template>
							</table:Column>
							<table:Column hAlign="Center" width="4rem">
								<table:customData>
									<core:CustomData key="p13nData" value='\{"columnKey": "ACTUAL_WORK_TIME", "leadingProperty": "ACTUAL_WORK_TIME"}'/>
								</table:customData>
								<Label text="{/#Demand/ACTUAL_WORK_TIME/@sap:label}"/>
								<table:template>
									<Text text="{path:'ACTUAL_WORK_TIME', type:'sap.ui.model.type.Float', formatOptions:{ 'decimals': 3 }}"/>
								</table:template>
							</table:Column>
							<!--<table:Column hAlign="Center" width="3rem" visible="{= ${/#Demand/NUMBER_OF_ASSIGNMENTS/@sap:visible} === 'false' ? false : true}">-->
							<!--	<table:customData>-->
							<!--		<core:CustomData key="p13nData" value='\{"columnKey": "NUMBER_OF_ASSIGNMENTS", "leadingProperty": "NUMBER_OF_ASSIGNMENTS"}'/>-->
							<!--	</table:customData>-->
							<!--	<Label text="{/#Demand/NUMBER_OF_ASSIGNMENTS/@sap:label}"/>-->
							<!--	<table:template>-->
							<!--		<Link text="{NUMBER_OF_ASSIGNMENTS}" press="onClickAssignCount" />-->
							<!--	</table:template>-->
							<!--</table:Column>-->
							<core:Fragment fragmentName="com.evorait.evoplan.view.common.fragments.AssignmentCountColumn" type="XML"/>
							<!--<core:Fragment fragmentName="com.evorait.evoplan.view.fragments.OrderIdColumn" type="XML"/>-->
						</table:columns>
						<table:dragDropConfig>
							<core:ExtensionPoint name="TableExtP|Demands|DemandsSet|DragDropConfig">
								<dnd:DragInfo sourceAggregation="rows" groupName="demandView" dragStart="onDragStart" dragEnd="onDragEnd"/>
							</core:ExtensionPoint>
						</table:dragDropConfig>
					</table:Table>
				</smartTable:SmartTable>
			</f:content>
			<f:footer>
				<OverflowToolbar>
					<Button id="idfindRightTechnicianButton" text="{i18n>xbut.findResource}" tooltip="{i18n>xbut.findResource}" icon="sap-icon://survey"
						press="onPressFindResource" enabled="false" visible="{user>/ENABLE_QUALIFICATION}">
						<layoutData>
							<core:ExtensionPoint name="PageExtP|Demands|DemandSet|Footer|Layout">
								<ToolbarLayoutData shrinkable="true"/>
							</core:ExtensionPoint>
						</layoutData>
					</Button>
					<core:ExtensionPoint name="PageExtP|Demands|DemandSet|Footer|Left"/>
					<ToolbarSpacer/>
					<core:ExtensionPoint name="PageExtP|Demands|DemandSet|Footer|Right"/>
					<core:Fragment fragmentName="com.evorait.evoplan.view.common.fragments.DemandToolbarButtons" type="XML"/>
				</OverflowToolbar>
			</f:footer>
		</f:DynamicPage>
	</Page>
</mvc:View>