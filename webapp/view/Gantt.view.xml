<mvc:View xmlns="sap.m"
		  xmlns:mvc="sap.ui.core.mvc"
		  xmlns:core="sap.ui.core"
		  xmlns:gnt2="sap.gantt.simple"
		  xmlns:table="sap.ui.table"
		  xmlns:dnd="sap.ui.core.dnd"
		  controllerName="com.evorait.evoplan.controller.Gantt"
		  displayBlock="true"
		  height="100%">
	<Page id="ganttPage" showFooter="false" showHeader="false">


		<gnt2:GanttChartContainer id="container" enableTimeScrollSync="true" busy="{viewModel>/ganttSettings/busy}">
			<gnt2:toolbar>
				<gnt2:ContainerToolbar
						design="Auto"
						showBirdEyeButton="true"
						showLegendButton="true"
						class="gantt_toolbar"
						>
					<gnt2:content>
						<DateRangeSelection
								id="idDateRangeGantt2"
								width="15%"
								change="onChangeDateRange"
						/>
						<Button id="idCreateAb" enabled="false" text="{i18n>xtit.createUnAvailability}" press="onCreateAbsence"/>
						<Button id="idToday" text="{i18n>xtit.today}" press="onPressToday"/>
					</gnt2:content>
					<gnt2:legendContainer>
						<gnt2:LegendContainer width="230px" height="250px">
							<gnt2:ListLegend title="{i18n>xtit.colorCodes}">
								<gnt2:ListLegendItem>
									<gnt2:BaseRectangle shapeId="legendStatus3" fill="#90EE90" title="{i18n>xtit.tableAssignment}" showTitle="false"/>
								</gnt2:ListLegendItem>
								<gnt2:ListLegendItem>
									<gnt2:BaseRectangle shapeId="legendStatus4" fill="#FFFF00" title="{i18n>xtit.partiallyAsgn}" showTitle="false"/>
								</gnt2:ListLegendItem>
								<gnt2:ListLegendItem>
									<gnt2:BaseRectangle shapeId="legendStatus2" fill="#87cefa" title="{i18n>xbut.tranMob}" showTitle="false"/>
								</gnt2:ListLegendItem>
								<gnt2:ListLegendItem>
									<gnt2:BaseRectangle shapeId="legendStatus5" fill="#FFA500" title="{i18n>xbut.enroute}" showTitle="false"/>
								</gnt2:ListLegendItem>
								<gnt2:ListLegendItem>
									<gnt2:BaseRectangle shapeId="legendStatus6" fill="#E6E6FA" title="{i18n>xbut.start}" showTitle="false"/>
								</gnt2:ListLegendItem>
								<gnt2:ListLegendItem>
									<gnt2:BaseRectangle shapeId="legendStatus1" fill="#006400" title="{i18n>xbut.comp}" showTitle="false"/>
								</gnt2:ListLegendItem>
							</gnt2:ListLegend>
						</gnt2:LegendContainer>
					</gnt2:legendContainer>
					

				</gnt2:ContainerToolbar>
			</gnt2:toolbar>

			<gnt2:GanttChartWithTable id="ganttResourceAssignments"
									  ghostAlignment="Start"
									  adhocLineLayer="Bottom"
									  shapeSelectionMode = "Single"
									  shapeSelectionSettings="{color:'red', strokeDasharray:'1,0'}"
									  shapeDrop="onShapeDrop"
									  shapeResize="onShapeResize"
									  shapeDoubleClick="onShapeDoubleClick"
									  shapeContextMenu="onShapeContextMenu"
									  showShapeTimeOnDrag="true"
									  selectionPanelSize="30%">
				<gnt2:table>
					<table:TreeTable
							id="ganttResourceTreeTable"
							selectionMode="Single"
							visibleRowCountMode="Auto"
							enableColumnReordering="false"
							enableBusyIndicator="true"
							busyStateChanged="onBusyStateChanged"
							enableCellFilter="false"
							columnHeaderVisible="false"
							selectionBehavior="RowOnly"
							rowSelectionChange="onRowSelectionChange"
							threshold="5"
							rows="{
								path: '/GanttResourceHierarchySet',
								parameters: {
									numberOfExpandedLevels:1,
									restoreTreeStateAfterChange:true,
									operationMode: 'Server',
									expand:'AssignmentSet,ResourceAvailabilitySet',
									groupId:'GanttTree'
								}
							}">
						<table:extension>
							<OverflowToolbar>
								<SearchField search="onSearchResource"/>
							</OverflowToolbar>
						</table:extension>
						<table:rowSettingsTemplate>
							<gnt2:GanttRowSettings rowId="{NodeId}"
								shapes3="{
									path:'AssignmentSet',
									templateShareable:true
								}"
								shapes2="{
										path:'ResourceAvailabilitySet',
										templateShareable:true
								}">

								<gnt2:shapes1>
									<core:Fragment fragmentName="com.evorait.evoplan.view.gantt.BackGroundShape" type="XML"/>
								</gnt2:shapes1>

								<gnt2:shapes2>
									<core:Fragment fragmentName="com.evorait.evoplan.view.gantt.UnAvailabilityShape" type="XML"/>
								</gnt2:shapes2>

								<gnt2:shapes3>
									<core:Fragment fragmentName="com.evorait.evoplan.view.gantt.AssignmentShape" type="XML"/>
								</gnt2:shapes3>


							</gnt2:GanttRowSettings>
						</table:rowSettingsTemplate>

						<core:Fragment fragmentName="com.evorait.evoplan.view.gantt.ResourceTreeColumns" type="XML"/>
						<table:dragDropConfig>
							<dnd:DropInfo
								groupName="demandsAny"
								targetAggregation="rows"
								dropPosition="On"
								drop="onDropOnResource" />
						</table:dragDropConfig>
					</table:TreeTable>
				</gnt2:table>

				<gnt2:axisTimeStrategy>
					<core:Fragment fragmentName="com.evorait.evoplan.view.gantt.AxisTimeStrategy" type="XML"/>
				</gnt2:axisTimeStrategy>

			</gnt2:GanttChartWithTable>

		</gnt2:GanttChartContainer>

	</Page>
</mvc:View>