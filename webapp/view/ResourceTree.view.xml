<mvc:View controllerName="com.evorait.evoplan.controller.ResourceTree" xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc"
	xmlns:f="sap.f" xmlns:table="sap.ui.table" xmlns:smartTable="sap.ui.comp.smarttable" xmlns:controls="com.evorait.evoplan.ui.controls"
	xmlns:l="sap.ui.layout" displayBlock="true" height="100%">
	<f:DynamicPage id="idResourcePage" headerExpanded="true" preserveHeaderStateOnScroll="true" fitContent="false" showFooter="true"
		class="sapUiNoContentPadding tableContentPage" toggleHeaderOnTitleClick="false">
		<f:header>
			<f:DynamicPageHeader id="resourceTreePageHeader" pinnable="true">
				<f:content>
					<l:VerticalLayout id="resourceTreeFilterBarFragment" width="100%"></l:VerticalLayout>
				</f:content>
			</f:DynamicPageHeader>
		</f:header>
		<f:content>
			<smartTable:SmartTable id="droppableTable" entitySet="{viewModel>/treeSet}" class="listTreeTable" tableType="TreeTable" fitContainer="true"
				useExportToExcel="false" useVariantManagement="false" useTablePersonalisation="false" smartFilterId="resourceTreeFilterBar"
				header="Hierarchy" showRowCount="false" enableAutoBinding="false" beforeRebindTable="onBeforeRebindTable" requestAtLeastFields="*"
				initiallyVisibleFields="Description">
			<smartTable:layoutData>
				<FlexItemData growFactor="1"/>
			</smartTable:layoutData>
			<table:TreeTable selectionMode="None" enableColumnReordering="false">
				<table:columns>
					<table:Column label="{i18n>xtit.tableObject}" name="{i18n>xtit.tableObject}">
						<table:customData>
							<core:CustomData key="p13nData" value='\{"columnKey": "Description", "leadingProperty": "Description"}'/>
						</table:customData>
						<table:template>
							<controls:CustomTitle text="{Description}" tooltip="{Description}"
								titleStyle="{ path: 'NodeType', formatter: '.formatter.formatResourceTitle' }"
								availabilityIcon="{ path: 'IS_AVAILABLE', formatter: '.formatter.getAvailabilityIcon' }"
								iconColor="{ path: 'IS_AVAILABLE', formatter: '.formatter.formatIconColor' }"
								iconTooltip="{ path: 'IS_AVAILABLE', formatter: '.formatter.formatIconTooltip' }"
								icon="{ parts:[{path: 'NodeType'},{path: 'StatusIcon'}], formatter: '.formatter.getResourceIcon' }"
								isLink="{ path: 'NodeType', formatter: '.formatter.isAssignment' }" press="onPressAssignmentLink"/>
						</table:template>
					</table:Column>
					<table:Column label="{i18n>xtit.tableWorkload}" name="{i18n>xtit.tableWorkload}" width="5rem" hAlign="End"
						visible="{= ${/#ResourceHierarchy/Utilization/@sap:visible} === 'true'? true : false }">
						<table:customData>
							<core:CustomData key="p13nData" value='\{"columnKey": "TOTAL_EFFORT", "leadingProperty": "TOTAL_EFFORT"}'/>
						</table:customData>
						<table:template>
							<Text text="{TOTAL_EFFORT}H" wrapping="false"/>
						</table:template>
					</table:Column>
					<table:Column label="{i18n>xtit.tableAssignment}" name="{i18n>xtit.tableAssignment}" width="3rem" hAlign="End">
						<table:customData>
							<core:CustomData key="p13nData" value='\{"columnKey": "AssignmentCount", "leadingProperty": "AssignmentCount"}'/>
						</table:customData>
						<table:template>
							<Text text="{AssignmentCount}" visible="{= ${NodeType} === 'ASSIGNMENT' ? false : true }" wrapping="false"/>
						</table:template>
					</table:Column>
					<table:Column label="{i18n>xtit.tableCheckbox}" name="{i18n>xtit.tableCheckbox}" width="4rem" class="sapUiNoContentPadding">
						<table:customData>
							<core:CustomData key="p13nData" value='\{"columnKey": "NodeType", "leadingProperty": "NodeType"}'/>
						</table:customData>
						<table:template>
							<CheckBox enabled="true" select="onChangeSelectResource" visible="{ path: 'NodeType', formatter: '.formatter.isMainResource' }"
								selected="{IsSelected}"/>
						</table:template>
					</table:Column>
				</table:columns>
			</table:TreeTable>
		</smartTable:SmartTable>
		</f:content>
		<f:footer>
			<OverflowToolbar>
				<ToolbarSpacer/>
				<Button id="idButtonunassign" text="{i18n>xbut.buttonUnassign}" tooltip="{i18n>xbut.buttonUnassign}" press="onPressUnassign" enabled="false">
					<layoutData>
						<ToolbarLayoutData shrinkable="true"/>
					</layoutData>
				</Button>
				<Button id="idButtonreassign" text="{i18n>xfld.newAssign}" tooltip="{i18n>xfld.newAssign}" press="onPressReassign" enabled="false">
					<layoutData>
						<ToolbarLayoutData shrinkable="true"/>
					</layoutData>
				</Button>
				<Button id="showPlanCalendar" text="{i18n>xbut.showPlanningCal}" tooltip="{i18n>xbut.showPlanningCal}" icon="sap-icon://calendar"
					press="onPressShowPlanningCal" enabled="false">
					<layoutData>
						<ToolbarLayoutData shrinkable="true"/>
					</layoutData>
				</Button>
			</OverflowToolbar>
		</f:footer>
	</f:DynamicPage>
</mvc:View>