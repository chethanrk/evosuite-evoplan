<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:unified="sap.ui.unified" xmlns:tnt="sap.tnt" xmlns:l="sap.ui.layout">
	<Dialog id="idMapSingleDayPlanner" class="sapUiTinyMargin" stretch="true" draggable="false" resizable="true">
		<customHeader>
			<Bar>
				<contentLeft></contentLeft>
				<contentMiddle>
					<Title text="{i18n>xtit.singlePlanningCalendar}"/>
				</contentMiddle>
				<contentRight>
					<Button icon="sap-icon://decline" press="onPressClose"/>
				</contentRight>
			</Bar>
		</customHeader>
		<content>
			<l:DynamicSideContent class="sapUiDSCExplored sapUiContentPadding" sideContentVisibility="AlwaysShow"
				showSideContent="{path: 'mapSinglePlanning>/legendShown'}" containerQuery="true" breakpointChanged="updateToggleButtonState">
				<l:mainContent>
					<SinglePlanningCalendar id="idSinglePlanningCalendar" title="{i18n>xtit.planningFor} {mapSinglePlanning>/parentData/Description}"
						startDate="{path: 'mapSinglePlanning>/startDate'}" fullDay="false" startHour="{mapSinglePlanning>/startHour}"
						endHour="{mapSinglePlanning>/endHour}" appointments="{path: 'mapSinglePlanning>/appointments'}"
						specialDates="{path: 'mapSinglePlanning>/specialDates'}" enableAppointmentsCreate="false" enableAppointmentsDragAndDrop="true"
						enableAppointmentsResize="false" startDateChange="onChangeStartDate" headerDateSelect="onChangeStartDate"
						appointmentDrop="onDropAppointment" stickyMode="All">
						<actions>
							<tnt:InfoLabel text="{i18n>ymsg.unsavedChanges}" colorScheme="1" displayOnly="true" visible="{mapSinglePlanning>/hasChanges}"/>
							<Button type="Emphasized" text="{i18n>xbut.buttonSave}" icon="sap-icon://save" press="onPressSaveAppointments"
								tooltip="{i18n>xbut.buttonSave}"/>
							<Button text="{i18n>xbut.buttonCancel}" icon="sap-icon://cancel" press="onPressCancelAppointments" tooltip="{i18n>xbut.buttonCancel}"/>
							<Text text="|"/>
							<Button type="Default" text="{i18n>xbut.calcRoute}" icon="sap-icon://map-3" press="onPressCalculateRoute" tooltip="{i18n>xbut.calcRoute}"
								visible="{ ${user>/ENABLE_MAP_ROUTE_CALCULATE} === 'X'}"/>
							<Button type="Default" text="{i18n>xbut.optRoute}" icon="sap-icon://map-2" press="onPressOptimizeRoute" tooltip="{i18n>xbut.optRoute}"
								visible="{ ${user>/ENABLE_MAP_ROUTE_OPTIMIZE} === 'X'}"/>
							<ToggleButton text="Full Day" press="toggleFullDay"/>
							<ToggleButton pressed="{path: 'mapSinglePlanning>/legendShown'}" icon="sap-icon://legend"/>
						</actions>
						<specialDates>
							<unified:DateTypeRange startDate="{mapSinglePlanning>start}" endDate="{mapSinglePlanning>end}" type="{mapSinglePlanning>type}"/>
						</specialDates>
						<appointments>
							<unified:CalendarAppointment key="{mapSinglePlanning>Guid}" title="{mapSinglePlanning>title}" text="{mapSinglePlanning>text}" type="None"
								color="{mapSinglePlanning>color}" icon="{mapSinglePlanning>icon}" startDate="{mapSinglePlanning>DateFrom}"
								endDate="{mapSinglePlanning>DateTo}"/>
						</appointments>
					</SinglePlanningCalendar>
				</l:mainContent>
				<l:sideContent width="200px">
					<PlanningCalendarLegend items="{path : 'mapSinglePlanning>/legendItems', templateShareable: true}"
						appointmentItems="{path : 'mapSinglePlanning>/legendAppointmentItems', templateShareable: true}" class="sapUiSmallMarginTop">
						<items>
							<unified:CalendarLegendItem text="{mapSinglePlanning>CharactersticDescription}" color="{mapSinglePlanning>Colourcode}"
								tooltip="{mapSinglePlanning>CharactersticDescription}"/>
						</items>
						<appointmentItems>
							<unified:CalendarLegendItem text="{mapSinglePlanning>CharactersticDescription}" color="{mapSinglePlanning>Colourcode}"
								tooltip="{mapSinglePlanning>CharactersticDescription}"/>
						</appointmentItems>
					</PlanningCalendarLegend>
				</l:sideContent>
			</l:DynamicSideContent>
		</content>
		<buttons></buttons>
	</Dialog>
</core:FragmentDefinition>