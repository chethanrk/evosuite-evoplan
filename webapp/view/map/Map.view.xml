<mvc:View xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core" xmlns:vbm="sap.ui.vbm" xmlns:vk="sap.ui.vk" xmlns:f="sap.f"
	controllerName="com.evorait.evoplan.controller.map.Map" displayBlock="true" height="100%" xmlns:l="sap.ui.layout">
	<Page id="MapPage" showFooter="true" showHeader="false">
		<l:Splitter orientation="Vertical">
			<NavContainer id="leftPanel" class="panelPage">
				<f:DynamicPage id="idMapDynamicPage" headerExpanded="true" fitContent="true" preserveHeaderStateOnScroll="true" showFooter="true"
					toggleHeaderOnTitleClick="false" class="sapUiNoContentPadding tableContentPage" >
					<f:header>
						<f:DynamicPageHeader pinnable="true">
							<f:content>
								<core:Fragment fragmentName="com.evorait.evoplan.view.map.fragments.SmartFilterMapDemands" type="XML"/>
							</f:content>
						</f:DynamicPageHeader>
					</f:header>
					<f:content>
						<vk:MapContainer id="idMapContainer" autoAdjustHeight="true" settingsPressed="onClickMapDemandFilter" busy="{viewModel>/mapSettings/busy}">
							<vk:content>
								<vk:ContainerContent title="Geographic Map" icon="sap-icon://activities" >
									<vk:content>
										<vbm:GeoMap id="idGeoMap" lassoSelection="true" rectangularSelection="true" drop="onDrop"  select="onSelectSpots" initialZoom="{user>/MAP_INITIAL_ZOOM}" initialPosition="{user>/MAP_INITIAL_POSITION}">
											<vbm:vos>
												<vbm:Routes items="{viewModel>/mapSettings/routeData}">
													<vbm:items>
														<vbm:Route id="idMapRoute" position="{viewModel>sLong};{viewModel>sLat};0;{viewModel>dLong};{viewModel>dLat};0" color="rgb(117,148,34)"
															colorBorder="rgb(255,255,255)" linewidth="3" routetype="Geodesic" click="onClickRoute" contextMenu="onContextMenuRoute"/>
													</vbm:items>
												</vbm:Routes>
												<vbm:Spots items="{/DemandSet}" select="onSelect" deselect="onDeselect" >
													<vbm:items>
														<vbm:Spot contentColor="{path:'CRITICALITY',formatter:'.formatter.formatStatusIconColor'}"
																  hotScale="1.1;1.1;1.1"
																  tooltip="{ORDERID} - {OPERATIONID}"
																  type="{path:'CRITICALITY',formatter:'.formatter.getSpotType'}"
																  select="{IS_SELECTED}" scale="{path:'IS_SELECTED',formatter:'.formatter.getSpotScale'}"
																  icon="{STATUS_ICON}"
																  changeable="true"
																  position="{LONGITUDE};{LATITUDE};0"
																  contextMenu="onContextMenu"></vbm:Spot>
													</vbm:items>
												</vbm:Spots>
											</vbm:vos>
										</vbm:GeoMap>
									</vk:content>
								</vk:ContainerContent>
							</vk:content>
						</vk:MapContainer>
					</f:content>
				</f:DynamicPage>
				<layoutData>
					<l:SplitterLayoutData size="{=${viewModel>/showDemands} === true?'92%':'61%'}"/>
				</layoutData>
			</NavContainer>
			<core:Fragment fragmentName="com.evorait.evoplan.view.map.fragments.DemandsTable" type="XML"></core:Fragment>
		</l:Splitter>
	</Page>
</mvc:View>