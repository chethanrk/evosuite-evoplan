<core:FragmentDefinition
        xmlns="sap.m"
        xmlns:table="sap.ui.table"
        xmlns:core="sap.ui.core"
        xmlns:controls="com.evorait.evoplan.ui.controls">

    <Dialog title="{i18n>xtit.assignModalTitle}"
            contentHeight="80%"
            stretch="false"
            resizable="true"
            draggable="true"
            icon="sap-icon://activity-individual"
            class="treeTableDialog"
            afterOpen="refreshDialogTable">
        <content>
            <Toolbar>
                <SearchField search="onSearchAssignModal"
                             showRefreshButton="{= !${device>/support/touch} }"
                             value="{viewModel>/resourceSearchString}"
                             width="100%" />
            </Toolbar>

            <table:TreeTable
                    id="assignModalTable"
                    selectionMode="Single"
                    enableColumnReordering="false"
                    expandFirstLevel="true"
                    columnHeaderVisible="false"
                    visibleRowCount="10"
                    visibleRowCountMode="Auto"
                    class="listTreeTable sapUiSizeCondensed"
                    rowSelectionChange="onSelectionChange"
                    rows="{path : '/ResourceHierarchySet'}">

                <table:columns>
                    <table:Column
                            label="{i18n>xtit.tableObject}"
                            name="{i18n>xtit.tableObject}">
                        <table:template>
                            <controls:CustomTitle
                                    text="{Description}"
                                    titleStyle="{
                                        path: 'NodeType',
                                        formatter: '.formatter.formatResourceTitle'
                                    }"
                                    icon="{
                                      path: 'NodeType',
                                      formatter: '.formatter.getResourceIcon'
                                    }"/>
                        </table:template>
                    </table:Column>
                    <table:Column
                            label="{i18n>xtit.tableWorkload}"
                            name="{i18n>xtit.tableWorkload}"
                            minScreenWidth="Tablet"
                            demandPopin="true"
                            width="7rem"
                            hAlign="End">
                        <table:template>
                            <ProgressIndicator
                                    percentValue="{Utilization}"
                                    displayValue="{Utilization}%"
                                    showValue="true"
                                    state="None"
                                    visible="{
                                              path: 'NodeType',
                                              formatter: '.formatter.isMainResource'
                                        }"/>
                        </table:template>
                    </table:Column>
                    <table:Column
                            label="{i18n>xtit.tableAssignment}"
                            name="{i18n>xtit.tableAssignment}"
                            minScreenWidth="Tablet"
                            demandPopin="true"
                            width="4rem"
                            hAlign="End">
                        <table:template>
                            <Text text="{AssignmentCount}" wrapper="false" />
                        </table:template>
                    </table:Column>
                </table:columns>
            </table:TreeTable>

        </content>

        <beginButton>
            <Button text="{i18n>xbut.buttonCancel}" press="onCloseDialog" />
        </beginButton>

        <endButton>
            <Button text="{i18n>xbut.buttonOK}" type="Emphasized" press="onSaveDialog" />
        </endButton>
    </Dialog>

</core:FragmentDefinition>