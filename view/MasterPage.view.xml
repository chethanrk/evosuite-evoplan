<mvc:View controllerName="com.evorait.evoplan.controller.MasterPage"
          xmlns:core="sap.ui.core"
          xmlns="sap.m"
          xmlns:mvc="sap.ui.core.mvc"
          xmlns:layout="sap.ui.layout"
          xmlns:f="sap.f"
          xmlns:smartTable="sap.ui.comp.smarttable"
          xmlns:table="sap.ui.table"
          xmlns:controls="com.evorait.evoplan.ui.controls">

    <Page id="masterPage"
          title="{i18n>masterTitle}"
          showFooter="true"
          showHeader="true"
          class="sapUiNoContentPadding tableContentPage">

        <f:DynamicPage headerExpanded="true"
                       preserveHeaderStateOnScroll="true"
                       fitContent="true"
                       showFooter="false"
                       toggleHeaderOnTitleClick="false">
            <f:title>
                <f:DynamicPageTitle>
                    <f:heading>

                        <controls:CustomVariantManagement
                                id="customResourceVariant"
                                select="onSelectVariant"
                                enabled="true"
                                showExecuteOnSelection="true"
                                showShare="true"
                                lifecycleSupport="true"
                                persistencyKey="{viewModel>/persistencyKeyTree}"
                                entitySet="{viewModel>/treeSet}">
                        </controls:CustomVariantManagement>

                    </f:heading>
                    <f:actions>
                        <ToolbarSpacer/>
                        <Button icon="sap-icon://filter" type="Transparent" press="onFilterButtonPress" />
                    </f:actions>
                </f:DynamicPageTitle>
            </f:title>

            <f:header>
                <f:DynamicPageHeader pinnable="false">
                    <f:content>
                        <SearchField id="searchField"
                                     search="onSearchResources"
                                     showRefreshButton="{= !${device>/support/touch} }"
                                     width="100%">
                        </SearchField>
                    </f:content>
                </f:DynamicPageHeader>
            </f:header>

            <f:content>


                <!--<table:TreeTable
                        id="droppableTable"
                        selectionMode="Single"
                        enableColumnReordering="false"
                        expandFirstLevel="true"
                        toolbarStyleClass="treeTableHeader"
                        rows="{path : '/ResourceHierarchySet',
                            parameters : {countMode: 'Inline'}}">

                    <table:columns>
                        <table:Column label="Description">
                            <table:template>
                                <Text text="{Description}" wrapping="false" />
                            </table:template>
                        </table:Column>
                    </table:columns>
                </table:TreeTable>-->

                <layout:VerticalLayout width="100%" class="listTreeTable" >
                    <Tree id="droppableTable"
                          updateFinished="refreshDroppable"
                          updateStarted="onTreeUpdateStarted"
                          items="{path: '/ResourceHierarchySet'}"
                          toggleOpenState="onToggleOpenState">
                        <CustomTreeItem>
                            <FlexBox alignItems="Start"
                                     justifyContent="SpaceBetween"
                                     width="100%">
                                <items>
                                    <Link class="sapMH4FontSize"
                                          text="{Description}"
                                          subtle="true"
                                          press="onPressResourceLink" />
                                    <Text text="{Utilization}" />
                                    <Label text="{AssignmentCount}" class="sapMH5FontSize" />
                                </items>
                            </FlexBox>
                        </CustomTreeItem>
                    </Tree>
                </layout:VerticalLayout>
            </f:content>

        </f:DynamicPage>

        <footer>
            <OverflowToolbar>
                <ToolbarSpacer/>
                <!--<Button icon="sap-icon://filter" press="onFilterButtonPress" />-->
            </OverflowToolbar>
        </footer>
    </Page>
</mvc:View>